report_comment: >
  This report has been generated by the <a href="https://github.com/rachadele/nextflow_eval_pipeline" target="_blank">rachadele/nextflow_eval_pipeline</a>
  analysis pipeline.

data_format: 'yaml'

run_modules:
    - custom_content

custom_data:
  celltype_correct_composition:
    section_name: 'Cell type correctness'
    description: 'Composition per cell type of correctly predicted cells'
    file_format: 'tsv'
    plot_type: 'barplot'

  celltype_outlier_composition:
    section_name: 'Cell type outlier composition'
    description: >
    Composition per sample of predicted outliers:
      outlier_mito = mitochondrial outliers;
      outlier_ribo = ribosomal outliers;
      outlier_hb = hemoglobin outliers;
      counts_outlier = outlier of log1p_n_genes ~ log1p_n_counts;
      predicted_doublet = doublets predicted by sc.pp.scrublet;
    file_format: 'tsv'
    plot_type: 'barplot'

  correct_outlier_composition:
    section_name: 'Correct vs incorrect outlier composition'
    description: >
    Composition per sample of predicted outliers:
      outlier_mito = mitochondrial outliers;
      outlier_ribo = ribosomal outliers;
      outlier_hb = hemoglobin outliers;
      counts_outlier = outlier of log1p_n_genes ~ log1p_n_counts;
      predicted_doublet = doublets predicted by sc.pp.scrublet;
    file_format: 'tsv'
    plot_type: 'barplot'

  sample_correct_composition:
    section_name: 'Sample composition'
    description: 'Composition per sample of correctly predicted cells'
    file_format: 'tsv'
    plot_type: 'barplot'

  sample_outlier_composition:
    section_name: 'Sample outlier composition'
    description: >
      Composition per sample of predicted outliers:
        outlier_mito = mitochondrial outliers;
        outlier_ribo = ribosomal outliers;
        outlier_hb = hemoglobin outliers;
        counts_outlier = outlier of log1p_n_genes ~ log1p_n_counts;
        predicted_doublet = doublets predicted by sc.pp.scrublet;
    file_format: 'tsv'
    plot_type: 'barplot'

  markers_heatmap:
    section_name: 'Cell type markers'
    description: 'Expression of select markers. Count are averaged across cell-type labels and z-score normalized across genes.'
    file_format: 'tsv'
    plot_type: 'heatmap'

  actual_vs_predicted:
    section_name: 'Actual vs. predicted counts'
    description: >
      Actual vs. predicted counts of cell types.
    file_format: 'tsv'
    plot_type: 'barplot'


sp:
  markers_heatmap:
    fn: "*heatmap_mqc.tsv"

  celltype_correct_composition:
    fn: "*celltype_counts_correct_mqc.tsv"
  
  celltype_outlier_composition:
    fn: "*celltype_outlier_counts_mqc.tsv"

  correct_outlier_composition:
    fn: "*correct_outlier_counts_mqc.tsv"

  actual_vs_predicted:
    fn: "*actual_vs_predicted_mqc.tsv"
  
  sample_correct_composition:
    fn: "*sample_counts_correct_mqc.tsv"

  sample_outlier_composition:
    fn: "*sample_outlier_counts_mqc.tsv"


custom_content:
  order:
    - celltype_correct_composition
    - celltype_outlier_composition
    - actual_vs_predicted
    - correct_outlier_composition
    - markers_heatmap
