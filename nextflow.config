/*
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    Cell Type Annotation Benchmarking Pipeline - Nextflow config
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
*/

// Load base config
includeConfig "$projectDir/conf/base.config"

// Load params config
includeConfig "$projectDir/conf/params.config"

// Load module-specific config
includeConfig "$projectDir/conf/modules.config"

// Note: outdir is computed in profile-specific configs or via command line
// to ensure profile params are applied before path computation

// DAG settings
dag.overwrite = true

// Trace settings
trace {
    enabled = true
    file = "${params.outdir}/trace.txt"
    overwrite = true
}

// Cleanup settings
nextflow {
    clean {
        afterRun = true
    }
}

// Profiles
profiles {
    conda {
        conda.enabled = true
    }

  //  slurm {
   //     process.executor = 'slurm'
    //    process.queue = 'default'
   // }



    hsap {
        //includeConfig "$projectDir/conf/hsap.config"
    }

    mmus {
       // includeConfig "$projectDir/conf/mmus.config"
    }

    debug {
        process.beforeScript = 'echo $HOSTNAME'
        cleanup = false
    }
}

// Manifest
manifest {
    name            = 'cell-annotation-benchmark'
    author          = 'rschwartz'
    homePage        = ''
    description     = 'Benchmarking pipeline for cell type annotation methods'
    mainScript      = 'main.nf'
    nextflowVersion = '!>=23.04.0'
    version         = '1.0.0'
}
